# CPUEmulator
## Задание
Задание на создание эмулятора процессора:
- трехадресные команды;
- гарвардская архитектура;
- вычисление суммы элементов массива.
## Система команд
Так как в эмуляторе процессора используются трехадресные команды, то формат команды, принимаемый процессором, состоит из 32 бит, где:
| Битовые разряды | 31-28 | 27-12 | 11-8 | 7-4 | 3-0 |
| :-: | :-: | :-: | :-: | :-: | :-: |
| **Название** | cmdtype | literal | dest | op1 | op2 |
| **Описание** | Тип команды | Непосредственное значение | Номер регистра для записи результата | Номер регистра - первого операнда | Номер регистра - второго операнда |
## Характеристики эмулятора процессора
Эмулятор состоит из:
-  **Память данных**, размером 512 бит. Хранит в себе значения вводимых данных из инструкций. Процессор не может вызывать команды из памяти данных.
-  **Память команд**, размером 512 бит. Хранит в себе команды, вводимые из инструкций.
-  **Регистры**. Для данного эмулятора было выбрано 8 регистров.
-  **Флаг flagZ**. Флаг нуля, равен 1, если последний из вычисленных процессором результатов был равен 0.
-  **Флаг flagS**. Флаг знака, равен 1, если последний из вычисленных процессором результатов был меньше 0.  

Поддерживаемые команды:
- **`LOAD`** - загружает данные из памти или константы в регистр;
- **`ADD`** - выполняет сложение двух операндов и записывает результат в регистр;
- **`SUB`** - выполняет вычитание второго операнда из первого и записывает результат в регистр;
- **`JUMP`** - безусловный переход к указанной инструкции;
- **`STORE`** - сохраняет данные из регистра в память;
- **`JUMPZ`** - условный переход к указанной инструкции, если последний результат был равен нулю;
- **`HALT`** - останавливает выполнение программы;
- **`INC`** - увеличивает значение регистра на единицу.

Поддерживаемые способы адресации:
- **прямая адресация** (при помощи знака **#** и последующего целочисленного индекса в памяти данных. Пример: `JUMP #0`);
- **регистровая адресация** (при помощи указания регистра **R** и последующего целочисленного номера регистра. Пример: `INC R1`);
- **условно-регистровая адресация** (при помощи заключения значение регистра в квадратные скобки. Пример: `LOAD R1 [R0]`).

## Пример
<details>
<summary> Пример программы поступающей в процессор, который высчитывает сумму элементов массива </summary>
  
```
.data              ; Секция данных, здесь объявляются данные, которые будут храниться в памяти данных
num 7              ; Запись в память данных размера входящего массива чисел
num 1              ; Запись в память данных элемента массива
num 2
num 3
num 4
num 5
num 6
num 7
.text              ; Секция инструкций, здесь объявляются инструкции, которые буду храниться в памяти данных и выполняться процессором
LOAD R2, [R0]      ; Загрузка в регистр R2 значения размера массива
LOAD R4, #1        ; Загрузка в регистр R4 числа 1, выступает в качестве итератора по массиву
LOOP:              ; Лейбл цикла
LOAD R3, [R4]      ; Загрузка в регистр R3 значения элемента массива под номером R4, хранит в себе значение текущего элемента массива
ADD R1, R1, R3     ; Сложение регистров R1 и R3, регистр R3 хранит сумму элементов массива
INC R4             ; Переходим к следующему индексу массива
SUB R2, R2, #1     ; После каждой итерации уменьшаем количество необработанных элементов массива
JUMPZ END          ; Если обработали все элементы массива и регистр R2 равен нулю, переходим к метке завершения программы
JUMP LOOP          ; Иначе повторяем цикл
END:               ; Метка завершения программы
HALT               ; Завершение программы
```
</details>
